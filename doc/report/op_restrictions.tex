\subsection{Restrictions}
    \label{sec:primitiveops_restrictions}
    Here we summarize the restrictions on indexed summation presented thus far. All macros are defined in header files discussed in Section \ref{sec:reproBLAS}.

    As discussed previously, for a $K$-fold indexed type the minimum $K$
    accepted by ReproBLAS is 2. The maximum useful $K$ is
    $K_{max}=\lfloor(e_{\max} - e_{\min} + p - 1)/W\rfloor$,
    as this covers all of the bins and computes the exact sum (to within a relative error of $7 \epsilon$, subject to overflow and underflow as discussed in Section \ref{sec:primitiveops_error}).

    As discussed in \cite{repsum}, $W < p - 2$. As discussed in Section
    \ref{sec:indexed_overflow}, $2 W > p + 1$.

    By \eqref{eq:error}, we see that increasing $W$ and $K$ will increase
    the accuracy of reproducible summation. However, increases to $K$ drastically increase the number of flops necessary to compute an indexed sum and increases to $W$ decrease the number of deposits that can be performed between renormalizations (discussed in Section \ref{sec:primitiveops_renormalize}).
    We have chosen default values for $W$ and $K$ that give good performance while maintaining better accuracy than standard recursive summation.
    ReproBLAS uses the values $W = 40$ for indexed \texttt{double} and $W = 13$
    for indexed \texttt{float}. $W$ is configurable as the \texttt{XIWIDTH} macro in \texttt{config.h}.

    As absolute value of individual quantities added to ${Y_k}_P$ are not in
    excess of $2^{b_{I + k}}$, a maximum of $0.25\epsilon^{-1}2^{-W}$ elements
    may be deposited into ${Y_k}_P$ between renormalizations, as discussed in
    Section \ref{sec:primitiveops_renormalize}. For indexed \texttt{double}
    this number is $2^{11}$, whereas for indexed \texttt{float} this number is
    $2^9$. This number is referred to as the \textbf{endurance} of an indexed type and is supplied in ReproBLAS using the
    \texttt{XIENDURANCE} macro in \texttt{idxd.h}.

    By \eqref{eq:totalfreq}, an indexed type is capable of representing the sum
    of at least $0.25\epsilon^{-1}2^{-W}  \epsilon^{-1} = 2^{2  p - W - 2}$
    floating point numbers. For indexed \texttt{double} this number is
    $2^{64}$, whereas for indexed \texttt{float} this number is
    $2^{33}$. This number is referred to as the \textbf{capacity} of the indexed type and supplied in ReproBLAS using the
    \texttt{XICAPACITY} macro in \texttt{idxd.h}.

    The indexed types provided by ReproBLAS will, when used correctly, avoid intermediate overflow assuming the restrictions in the previous paragraph..

    As discussed in Section \ref{sec:indexed_underflow_gradual}, we assume gradual underflow and ReproBLAS will round the sum at best to the nearest $2^{e_{\min} - 1}$. However, Sections \ref{sec:indexed_underflow_gradual} and \ref{sec:indexed_underflow_abrupt} discuss ways that reproducible summation could be implemented and improved in the presence of both gradual and abrupt underflow.

    \begin{table}[!htbp]
        \centering
        \caption{ReproBLAS parameter limits}
        \begin{tabular}{| l | l | l |}\hline
            Data Type & $\texttt{double}$ & $\texttt{float}$ \\ \hline
            $W$ & 40 & 13 \\ \hline
            $K_{min}$ & 2 & 2 \\ \hline
            $K_{max}$ & 52 & 21 \\ \hline
            Endurance & $2^{11}$ & $2^9$ \\ \hline
            Capacity & $2^{64}$ & $2^{33}$ \\ \hline
        \end{tabular}
    \end{table}
